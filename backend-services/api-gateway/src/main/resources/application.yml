server:
  port: 8080

logging:
  file:
    path: ./logs
    name: application.log
  level:
    org.springframework.cloud.gateway: DEBUG
    reactor.netty.http.client: DEBUG
    com.alibaba.nacos.client: DEBUG

spring:
  application:
    name: api-gateway-rw
  config:
    import:
      - "nacos:shared-config-rw.yml"
  cloud:
    nacos:
      server-addr: 3.101.113.38:8848
      config:
        file-extension: yml
        group: DEFAULT_GROUP
    gateway:
      globalcors:
        cors-configurations:
          "[/**]":
            allowed-origins:
              - "http://localhost:3000"
              - "http://127.0.0.1:3000"
              - "http://18.144.29.74:3000"
            allowed-methods:
              - GET
              - POST
              - PUT
              - DELETE
              - OPTIONS
              - PATCH
            allowed-headers: "*"
            allow-credentials: true
            max-age: 3600
      discovery:
        locator:
          enabled: false
          lower-case-service-id: true
      routes:
        - id: user_service_route
          uri: lb://user-service-rw
          predicates:
            - Path=/api/user/**
          filters:
            - StripPrefix=0
        - id: qa_service_route
          uri: lb://qa-service-rw
          predicates:
            - Path=/api/qa/**
          filters:
            - StripPrefix=0
          default-filters:
            - name: RequestRateLimiter
              args:
                rate-limiter: "#{@inMemoryRateLimiter}"
                key-resolver: "#{@ipKeyResolver}"
                replenish-rate: 10000
                burst-capacity: 100000
                requested-tokens: 1

springdoc:
  swagger-ui:
    path: /swagger-ui.html
    enabled: true
